<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#6bb3ff">
  <title>InvitaciÃ³n Cumple â€“ Jimena 6 aÃ±os</title>

  <style>
    :root{
      --blanco:#ffffff;
      --azul-osc:#003366;
    }

    /* â€”â€”â€” Fondo â€”â€”â€”
       Uso el fondo que subÃ­ al repo: fondo_frozen_mobile.png.
       Si cambio el nombre del archivo, vengo aquÃ­ y actualizo la ruta. */
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: url("fondo_frozen_mobile.png") center/cover fixed no-repeat;
      color: var(--blanco);
      text-align:center;
      overflow-x: hidden;
    }

    .page{
      max-width: 820px;
      margin: 0 auto;
      padding: 28px 16px 84px; /* dejo aire abajo para los copitos finales */
    }

    /* â€”â€”â€” TÃ­tulos con â€œlatidoâ€ â€”â€”â€”
       Hago que palpiten suavemente para dar efecto mÃ¡gico */
    h1,h2{
      margin:.4rem 0;
      font-weight:900;
      color:#fff;
      text-shadow: 2px 2px 8px var(--azul-osc);
      animation: heartbeat 1.5s infinite;
    }
    h1{ font-size: clamp(38px, 7vw, 84px); }
    h2{ font-size: clamp(22px, 4.5vw, 48px); }

    @keyframes heartbeat {
      0%, 40%, 80%, 100% { transform: scale(1); }
      20%, 60% { transform: scale(1.12); }
    }

    /* â€”â€”â€” Texto base â€”â€”â€” */
    p,time{
      font-size: clamp(16px, 3.5vw, 28px);
      text-shadow:2px 2px 6px var(--azul-osc);
      margin:.35rem 0;
    }

    /* â€”â€”â€” Foto circular clicable â€”â€”â€”
       AquÃ­ pongo la foto jimena.jpg que subÃ­ al repo. */
    .photo-wrap{
      width: clamp(180px, 42vw, 320px);
      height: clamp(180px, 42vw, 320px);
      margin: 24px auto;
      border-radius: 50%;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,.25), inset 0 0 30px rgba(255,255,255,.35);
      overflow: hidden;
      cursor: pointer;
      outline: 4px solid rgba(255,255,255,.55);
    }
    .photo-wrap img{
      width:100%; height:100%; object-fit:cover; display:block;
    }
    .tap-hint{
      position:absolute; inset:auto 0 10px 0;
      font-weight:700;
      text-shadow:2px 2px 6px var(--azul-osc);
      pointer-events:none;
    }

    /* â€”â€”â€” Contador con brillo â€”â€”â€” */
    #countdown{
      font-size: clamp(20px,4.5vw,40px);
      margin-top:12px;
      font-weight:800;
      text-shadow:0 0 8px #00f, 0 0 16px #0ff;
      animation: glow 1.5s infinite alternate;
    }
    @keyframes glow {
      from { text-shadow: 0 0 6px #0ff, 0 0 12px #09f; }
      to   { text-shadow: 0 0 14px #fff, 0 0 28px #0ff; }
    }

    /* â€”â€”â€” Botones (Maps, WhatsApp, Reproducir) â€”â€”â€” */
    .btn{
      display:inline-block;
      margin:14px 8px 0;
      padding:12px 18px;
      border-radius:999px;
      border:2px solid rgba(255,255,255,.55);
      background:rgba(255,255,255,.18);
      color:var(--blanco);
      font-weight:800;
      text-decoration:none;
      text-shadow: 0 0 8px #0ff, 0 0 16px #09f;
      backdrop-filter: blur(4px);
      cursor:pointer;
      transition:transform .12s ease, background .2s ease;
    }
    .btn:active{ transform:scale(.98); }
    .btn:hover{ background:rgba(255,255,255,.26); }

    /* â€”â€”â€” Capa y animaciÃ³n de emojis â€”â€”â€”
       AquÃ­ dejo todo lo necesario para que salgan y floten. */
    .emoji-layer{ position: fixed; inset: 0; pointer-events: none; overflow: hidden; }
    .emoji{
      position:absolute;
      font-size: clamp(20px, 5vw, 42px);
      will-change: transform, opacity;
      animation: floatUp 1.5s ease-out forwards;
      filter: drop-shadow(0 3px 6px rgba(0,0,0,.35));
    }
    @keyframes floatUp{
      0%{ transform: translate(var(--x,0), var(--y,0)) scale(0.6) rotate(var(--r,0deg)); opacity:0; }
      10%{ opacity:1; }
      100%{ transform: translate(var(--xEnd,0), var(--yEnd,-220px)) scale(1) rotate(calc(var(--r) + 25deg)); opacity:0; }
    }

    /* â€”â€”â€” Mensaje final que late (copos + corazones) â€”â€”â€” */
    .final-message{
      margin-top:40px;
      font-size: clamp(18px,4.5vw,36px);
      font-weight:800;
      text-shadow: 0 0 8px #000, 0 0 16px #0ff;
      animation: heartbeat 2s infinite;
    }

    /* â€”â€”â€” Zona discreta al final para â€œnevarâ€ â€”â€”â€” */
    .snow-bottom{
      position: fixed;
      left:0; right:0; bottom:8px;
      pointer-events:none;
      font-size: 22px;
      text-shadow: 2px 2px 6px var(--azul-osc);
    }
  </style>
</head>

<body>
  <div class="page">
    <!-- Yo presento la cabecera palpitante -->
    <h2>Â¡Te invito a mi fiesta!</h2>
    <h1>JIMENA CUMPLE 6 AÃ‘OS</h1>

    <!-- AquÃ­ pongo la foto; si subo otra, solo cambio el src -->
    <div class="photo-wrap" id="photo" aria-label="Tocar para ver la magia y oÃ­r la invitaciÃ³n">
      <img src="jimena.jpg" alt="Foto de Jimena" />
      <div class="tap-hint">ğŸˆ Toca mi foto para ver la magia ğŸ‰</div>
    </div>

    <!-- Yo marco fecha y lugar -->
    <p>ğŸ“… <time datetime="2025-09-27">27 de septiembre de 2025</time> â€” ğŸ•” 17:00 h</p>
    <p>ğŸ“ <strong>Burbujaâ€™s Park</strong></p>

    <!-- AquÃ­ dejo el contador; solo cambio la fecha en el JS si cambia el plan -->
    <div id="countdown">â³ Cargando contador...</div>

    <p>Â¡HabrÃ¡ juegos, risas y mucha nieve imaginaria! â„ï¸</p>

    <!-- BotÃ³n para abrir Google Maps; si tengo la direcciÃ³n exacta, ajusto la query -->
    <a class="btn" href="https://www.google.com/maps/search/?api=1&query=Burbuja%27s+Park" target="_blank" rel="noopener">ğŸ“ Abrir ubicaciÃ³n</a>

    <!-- BotÃ³n de WhatsApp. Yo reemplazo 34123456789 por mi nÃºmero con prefijo (sin + ni espacios) -->
    <a class="btn" href="https://wa.me/34123456789?text=Hola%20Jimena%21%20Confirmo%20que%20voy%20a%20tu%20cumple%20%F0%9F%A5%B3" target="_blank" rel="noopener">ğŸ’¬ Confirmar por WhatsApp</a>

    <!-- BotÃ³n para volver a escuchar la grabaciÃ³n -->
    <button class="btn" id="replayBtn">ğŸ”Š Volver a escuchar</button>

    <!-- Frase final que me pediste (bien visible sobre el fondo) -->
    <div class="final-message" id="finalMsg">
      â„ï¸ğŸ’™â˜ƒï¸ Adoro los abrazos calentitos. Con cariÃ±o, Jimena â„ï¸ğŸ’™â˜ƒï¸
    </div>
  </div>

  <!-- Capa invisible donde yo â€œlanzoâ€ los emojis -->
  <div class="emoji-layer" id="emojiLayer"></div>

  <!-- Audio: en el repo renombro voz.mp3.unknown a voz.mp3 para que funcione -->
  <audio id="voice" preload="auto">
    <source src="voz.mp3" type="audio/mpeg">
  </audio>

  <!-- Tiro unos copitos con corazÃ³n al final, suaves -->
  <div class="snow-bottom" id="snowBottom" aria-hidden="true"></div>

  <script>
    /* â€”â€”â€” Ajustes y listas de emojis â€”â€”â€”
       Yo mezclo cumple + Frozen. Para el final uso solo â„ï¸ y ğŸ’™. */
    const EMOJIS = ["ğŸ‰","ğŸˆ","ğŸ‚","ğŸ§","ğŸ","âœ¨","â„ï¸","â›„","ğŸª„","ğŸ‘‘","ğŸ’™","ğŸŒŸ","ğŸ­","ğŸŠ","ğŸ§Š"];
    const FINAL_FLAKES = ["â„ï¸","ğŸ’™","â„ï¸","ğŸ’™","â„ï¸"];

    const photo  = document.getElementById('photo');
    const layer  = document.getElementById('emojiLayer');
    const audio  = document.getElementById('voice');
    const replay = document.getElementById('replayBtn');
    const finalMsg = document.getElementById('finalMsg');
    const snowBottom = document.getElementById('snowBottom');

    /* â€”â€”â€” Interacciones â€”â€”â€”
       Cuando toco la foto: emojis + audio.
       Cuando toco â€œvolver a escucharâ€: audio + mini burst centrado. */
    photo.addEventListener('click', (ev) => {
      burstEmojis(ev.clientX, ev.clientY);
      playVoice();
    });

    replay.addEventListener('click', () => {
      playVoice();
      burstEmojis(window.innerWidth/2, window.innerHeight*0.35, 28);
    });

    /* â€”â€”â€” ReproducciÃ³n de la voz â€”â€”â€”
       Si el navegador bloquea el autoplay, con el primer toque ya queda habilitado. */
    function playVoice(){
      try{
        audio.currentTime = 0;
        audio.play().catch(()=>{});
      }catch(e){}
    }
    window.addEventListener('pointerdown', ()=> {
      try{ audio.play().then(()=>audio.pause()); }catch(e){}
    }, { once:true });

    /* â€”â€”â€” ExplosiÃ³n de emojis â€”â€”â€”
       Yo genero N emojis, les doy trayectorias aleatorias y los elimino al terminar. */
    function burstEmojis(x,y,count=40){
      for(let i=0;i<count;i++){
        const span=document.createElement('span');
        span.className='emoji';
        span.textContent=EMOJIS[Math.floor(Math.random()*EMOJIS.length)];
        span.style.left=(x-10)+'px';
        span.style.top=(y-10)+'px';

        const angle=Math.random()*Math.PI*2;
        const radius=40+Math.random()*120;
        const xEnd=Math.cos(angle)*radius;
        const yEnd=-(120+Math.random()*240);
        const rot=(Math.random()*60-30)+'deg';

        span.style.setProperty('--x',(Math.random()*20-10)+'px');
        span.style.setProperty('--y',(Math.random()*20-10)+'px');
        span.style.setProperty('--xEnd',xEnd+'px');
        span.style.setProperty('--yEnd',yEnd+'px');
        span.style.setProperty('--r',rot);
        span.style.animationDuration=(1000+Math.random()*900)+'ms';

        layer.appendChild(span);
        span.addEventListener('animationend',()=> span.remove());
      }
    }

    /* â€”â€”â€” Contador regresivo â€”â€”â€”
       AquÃ­ pongo la fecha/hora exactas. Si cambia, yo actualizo esta lÃ­nea. */
    const countdownEl = document.getElementById("countdown");
    const targetDate = new Date("2025-09-27T17:00:00");

    function updateCountdown(){
      const now = new Date();
      const diff = targetDate - now;
      if(diff <= 0){
        countdownEl.textContent = "ğŸ‰ Â¡Ya empezÃ³ la fiesta! ğŸ‰";
        clearInterval(timer);
        return;
      }
      const d = Math.floor(diff/(1000*60*60*24));
      const h = Math.floor((diff/(1000*60*60))%24);
      const m = Math.floor((diff/(1000*60))%60);
      const s = Math.floor((diff/1000)%60);
      countdownEl.textContent = `â³ Faltan ${d}d ${h}h ${m}m ${s}s`;
    }
    const timer=setInterval(updateCountdown,1000);
    updateCountdown();

    /* â€”â€”â€” Copitos con corazÃ³n al final â€”â€”â€”
       Yo los voy â€œsembrandoâ€ en la parte baja de la pantalla, de forma suave. */
    function sprinkleFinal(){
      snowBottom.innerHTML = ""; // limpio por si recalculo
      const width = window.innerWidth;
      const n = Math.max(10, Math.floor(width/60)); // cantidad proporcional al ancho
      for(let i=0;i<n;i++){
        const span = document.createElement('span');
        span.textContent = FINAL_FLAKES[i % FINAL_FLAKES.length];
        span.style.margin = "0 .25rem";
        span.style.opacity = String(0.6 + Math.random()*0.4);
        snowBottom.appendChild(span);
      }
    }
    sprinkleFinal();
    window.addEventListener('resize', sprinkleFinal);
  </script>
</body>
</html>
